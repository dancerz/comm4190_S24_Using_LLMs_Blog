<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zaria Dancer">
<meta name="dcterms.date" content="2024-04-01">
<meta name="description" content="A post from a Jupyter notebook">

<title>Explorations with LLMs - Leveraging LLM’s to Find Graduation Dresses</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Explorations with LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Leveraging LLM’s to Find Graduation Dresses</h1>
                  <div>
        <div class="description">
          A post from a Jupyter notebook
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">prompting</div>
                <div class="quarto-category">shopping</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Zaria Dancer </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 1, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="llms-looking-for-graduation-dresses" class="level1">
<h1>LLMs Looking for Graduation Dresses</h1>
<p>I graduate next week and I need two dresses. I currently have one, but I would like options. I am hoping that AI will assist me in my search process by providing possible websites and options. I began with Gemini and ChatGPT, but realized that Gemini could supply physical links to possible products. This Blog Post documents my conversations with LLM’s to improve my shopping experience.</p>
<p>Prompt:</p>
<pre><code>I am graduating from college and I need to find a white dress. Make a list of places I can use to shop online. My Budget is $375, but I would ideally want to buy two dresses. I need fast shipping and quality options. </code></pre>
<section id="geminis-response" class="level2">
<h2 class="anchored" data-anchor-id="geminis-response">Gemini’s Response</h2>
<p>Here are some online stores you can check out to find white graduation dresses with fast shipping and quality options, keeping in mind your budget of $375 for two dresses:</p>
<p><strong>Lulu’s</strong> offers a wide range of graduation dresses, including white ones, that are all under $375. They have a large selection of styles to choose from, so you’re sure to find something that you love. Plus, they offer fast shipping options, so you can get your dress in time for graduation.</p>
<p>https://www.lulus.com</p>
<p><strong>Showpo</strong> is another great option for affordable graduation dresses. They have a large selection of white dresses in a variety of styles, all for under $375. They also offer fast shipping options, so you can get your dress in time for graduation. Opens in a new window</p>
<p>https://www.showpo.com</p>
<p>ASOS is a great place to find trendy and stylish graduation dresses. They have a wide variety of white dresses in a variety of styles, all for under $375. They also offer fast shipping options, so you can get your dress in time for graduation.</p>
<p>https://www.asos.com/us/</p>
<p>Reformation offers sustainable and well-made dresses that are perfect for graduation. They have a smaller selection of white dresses, but the ones they do have are all beautiful and well-made. While some of their dresses might be outside your budget on their own, with strategic shopping you could find two that fit the bill. Their shipping times are also generally quite fast.</p>
<p>https://www.thereformation.com</p>
<p>Rent the Runway is a great option if you want to wear a designer dress for graduation without breaking the bank. They have a large selection of white dresses from top designers, and you can rent them for a fraction of the retail price. Their dresses tend to be more on the high-end and may not all fit within your budget, but it’s worth checking out their selection, especially if you know exactly what designer dress you want.</p>
<p>https://www.renttherunway.com</p>
<p>Here are some tips for shopping for graduation dresses online:</p>
<p>Read the reviews: Before you buy a dress, be sure to read the reviews from other customers. This can help you get a sense of the quality of the dress and the sizing.</p>
<p>Order a size up: If you’re between sizes, it’s always better to order a size up. You can always have the dress altered to fit you perfectly.</p>
<p>Consider the return policy: Make sure you know the return policy before you buy a dress. This way, you can be sure that you can return the dress if it doesn’t fit or if you don’t like it. Shop early: The closer you get to graduation, the more likely it is that dresses will sell out. So be sure to start shopping early so that you have a wider selection to choose from.</p>
<pre><code> &nbsp;I want something more unique, classy, and quality. I want to be able to wear these dresses again. I am open to vintage and designer options as well. My favorite option out of the ones supplied is Reformation.</code></pre>
<p>Since you’re looking for classy, high-quality white dresses that you can wear again, here are some refined options that cater to your preferences and budget:</p>
<p>Reformation (Budget-friendly designer)** is a perfect choice! They focus on sustainable, well-made dresses with classic silhouettes that can easily transition to other events. Here are some ways to maximize your budget:</p>
<p>Focus on the Sale Section: Reformation has a dedicated sale section where you might find hidden gems at a discounted price. Look for dresses made from high-quality materials like silk or linen that would normally be outside your budget. Department Store Luxury Options: Many department stores have dedicated designer sections where you can find dresses within your budget, especially if you consider pre-owned:</p>
<p>www.nordstrom.com Nordstrom online store has a great selection of contemporary and designer dresses. Consider their “pre-owned” section where you might find gently used designer dresses for a fraction of the original price. They also offer free shipping and returns which can be helpful!</p>
<p>www.premiumoutlets.com Bloomingdale’s online store similar to Nordstrom, Bloomingdale’s offers a wide range of designer dresses. They also have a pre-owned section where you can find gently used designer pieces at a significant discount. They offer free shipping and returns on most orders.</p>
<p>www.saksfifthavenue.com Saks Fifth Avenue online store might have some options outside your budget, but they are known for their designer selection, and occasionally have sales that can bring the price down. It’s worth checking out their website or app, especially during special promotions. Vintage Websites:</p>
<p>The RealReal RealReal online store is a curated marketplace for pre-owned luxury goods. You can find a great selection of vintage designer dresses here, and they authenticate everything before it’s listed for sale. While some dresses may be above your budget, with strategic searching you might find the perfect dress at a significant discount. Things to Consider When Shopping Online for Vintage or Designer Dresses:</p>
<p>Measurements: Pay close attention to the measurements listed for the dress. Since you can’t try it on beforehand, ensure the measurements align well with yours. Condition: When shopping pre-owned, be sure to read the description carefully about the condition of the dress. Look for high-quality photos that allow you to see the details of the dress. Return Policy: Check the return policy before you buy, especially when shopping vintage or pre-owned. This way, you can be sure you can return the dress if it doesn’t fit or isn’t as described. Additional Tips:</p>
<p>Tailoring is your friend: Even if you find a dress that almost fits perfectly, a tailor can make small adjustments to ensure a flawless look. Classic silhouettes are timeless: A sheath dress, a wrap dress, or a fit-and-flare dress are all classic silhouettes that will never go out of style. Invest in quality fabrics: Look for dresses made from natural fibers like silk, linen, or cotton. These fabrics will drape better and last longer. With a little effort, you should be able to find two beautiful white graduation dresses that you can wear and treasure for years to come!</p>
<hr>
<p><em>Many of the recommendations are places I have already looked, which is not super helpful. I already found one dress on <strong>ShopBop</strong> before attempting to use LLMs. I’m going to continue framing my prompts specifically and trying to pull more likeable options.</em></p>
<p>Below, you can see Gemini actually provide a link to an option. <strong>I just asked for an actual option</strong> Moving forward, I would love to see an entire list of options with links.</p>
<p><img src="refdress.png" width="100%"></p>
<p>https://us.vestiairecollective.com/women-clothing/dresses/reformation/white-linen-reformation-dress-42383851.shtml</p>
<pre><code>    Thank you for these options. Could you find me a dress that is not on a 2nd hand site or platform. The Budget is $375. I like all lengths. For sleeves, I prefer sleeveless to strapless. I am fine with most necklines. For fit, I would like something that fits the waist well or something flows. I prefer quality materials: Silk, Linen, Cotton, Wool, Leather, etc. I would like something unique and classy. My dress size is a US 4/Small. Can you please create a list of possible options with links. </code></pre>
<p><img src="geminidress.png" width="100%"></p>
<p>Here is where everything decreased in quality, since the responses included options that clearly did not fit my guidelines. As you can see above, this dress is black. There were also other options outside of my price range and on 2nd hand sites (at first I was okay with vintage, but then I minimized that to help receive tailored options).</p>
<hr>
</section>
<section id="chatgpts-response" class="level2">
<h2 class="anchored" data-anchor-id="chatgpts-response">ChatGPT’s Response</h2>
<p>Congratulations on your graduation! It’s great that you’re looking for white dresses online. With your budget and preferences in mind, here’s a list of online stores where you can find quality white dresses with fast shipping options:</p>
<p>ASOS:</p>
<p>ASOS offers a wide range of affordable and stylish white dresses. They often have sales and promotions that can fit within your budget. Fast shipping options are available, including express delivery.</p>
<p>Nordstrom:</p>
<p>Nordstrom carries a variety of white dresses from different brands and designers. Look for their “Under $200” or “Under $300” sections to find budget-friendly options. Nordstrom offers fast shipping, including expedited options for quicker delivery.</p>
<p>Revolve:</p>
<p>Revolve features trendy and contemporary white dresses suitable for graduation. Browse their selection for options within your budget range. They offer quick shipping, and you can filter by shipping time to find items that can be delivered promptly.</p>
<p>Lulus:</p>
<p>Lulus specializes in affordable and stylish dresses, including many white options. You can find elegant graduation dresses within your budget. They offer expedited shipping options for faster delivery.</p>
<p>Boohoo:</p>
<p>Boohoo has a wide range of white dresses at budget-friendly prices. Check their sale section for additional discounts. Boohoo often provides fast shipping options, including express delivery.</p>
<p>Amazon:</p>
<p>Amazon offers a vast selection of white dresses from various sellers. Look for dresses with Prime shipping for faster delivery. Read customer reviews to ensure quality and fit.</p>
<p>H&amp;M:</p>
<p>H&amp;M features affordable white dresses suitable for graduation. Explore their online store for stylish options. They offer fast shipping services.</p>
<p>Zara:</p>
<p>Zara offers chic and fashionable white dresses. Check their online store for dresses within your budget. Zara provides expedited shipping options for quick delivery.</p>
<p>Macy’s:</p>
<p>Macy’s carries a range of white dresses from different brands. Look for dresses on sale or clearance to maximize your budget. They offer fast shipping services.</p>
<p>Missguided:</p>
<p>Missguided has trendy white dresses at affordable prices. Explore their selection for graduation-appropriate styles. They provide quick shipping options.</p>
<p>When shopping online, remember to check the shipping policies, delivery times, and return/exchange options to ensure a smooth purchasing experience. Additionally, look for customer reviews and size guides to make informed decisions about the dresses you choose. Happy shopping and best wishes for your graduation!</p>
<pre><code>&nbsp;I want something more unique, classy, and quality. I want to be able to wear these dresses again. I am open to vintage and designer options as well. My favorite option out of the ones supplied is Reformation.</code></pre>
<p>It’s wonderful that you’re looking for unique, classy, and quality white dresses that you can wear beyond graduation, including considering vintage and designer options. Revolve is a great choice as they offer a curated selection of stylish and higher-end dresses. Here are some tailored recommendations to explore on Revolve and a few additional suggestions to help you find the perfect dresses:</p>
<p>Revolve:</p>
<p>Revolve carries a variety of designer and boutique brands known for unique and quality pieces. Explore their selection of white dresses, including options suitable for graduation and beyond. Look for dresses from brands like Lovers + Friends, Tularosa, Majorelle, and House of Harlow 1960 for elegant and timeless styles.</p>
<p>Net-a-Porter:</p>
<p>Net-a-Porter is a luxury online retailer offering a range of designer dresses. Browse their white dress collection for high-quality options that can be worn for special occasions. Consider brands like Zimmermann, Self-Portrait, and Reformation for sophisticated and stylish dresses.</p>
<p>Shopbop:</p>
<p>Shopbop features a curated selection of designer and contemporary white dresses. Explore their assortment of dresses suitable for graduation and future events. Look for brands like Veronica Beard, Ulla Johnson, and ASTR the Label for chic and versatile dresses.</p>
<p>The RealReal:</p>
<p>The RealReal specializes in pre-owned luxury fashion, including vintage designer dresses. Discover unique and timeless white dresses from top designers like Chanel, Gucci, and Dior. Explore their collection for sustainable and one-of-a-kind options.</p>
<p>Farfetch:</p>
<p>Farfetch is an online platform that connects you to boutiques worldwide, offering a diverse range of designer dresses. Search for white dresses from emerging and established designers for a distinctive look. Consider brands like Ganni, Rixo, and Rotate Birger Christensen for modern and sophisticated styles.</p>
<p>Etsy:</p>
<p>Etsy is a great platform for finding unique vintage and handmade white dresses. Explore vintage shops on Etsy for one-of-a-kind pieces that can be styled for various occasions. Look for vintage dresses from the 1960s, 1970s, or 1980s for a timeless and classy vibe.</p>
<p>Reformation:</p>
<p>Reformation offers sustainable and chic white dresses that are perfect for graduation and beyond. Explore their selection of eco-friendly dresses made from quality materials. Look for classic silhouettes and flattering designs that can be dressed up or down. When browsing these websites, use filters to narrow down your search based on price, style, size, and brand preferences. Consider investing in versatile dresses that can be styled differently for various occasions to maximize wearability. Also, check customer reviews and return policies to ensure satisfaction with your purchase. Happy shopping and enjoy finding your perfect graduation dresses!</p>
<hr>
<p>Overall, it was interesting to see the options LLM’s provides and how they align with my shopping preferences. I shop at a lot of the Brands that were recommended. For practicality reasons, this was not helpful because I was looking for new options and websites. I was hopeful with Gemini, since it began to generate responses that included specific listings and links. This was short lived, because it began to respond with options that were not my size, the wrong color, sold out, and other guideline I provided. I think LLM’s lack knowledge surrounding shopping and probably just resort to the websites that are most popular according to the users prompt. There was not anything unique about the responses - styles, brands, etc. Furthermore, I believe LLM’s could be leveraged to empower up &amp; coming emerging designers and low-key brands. I am still in need of a second graduation dress, but this experience had opened my eyes to new possibilities with LLMs. Hopefully this helps someone else looking for Graduation dresses!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dancerz\.github\.io\/comm4190_S24_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>