<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zaria Dancer">
<meta name="dcterms.date" content="2024-04-03">
<meta name="description" content="A post from a Jupyter notebook">

<title>Explorations with LLMs - The Fashion Face-Off: AI vs Human Stylist</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Explorations with LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The Fashion Face-Off: AI vs Human Stylist</h1>
                  <div>
        <div class="description">
          A post from a Jupyter notebook
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">prompting</div>
                <div class="quarto-category">human</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Zaria Dancer </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 3, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<hr>
<section id="the-fashion-face-off-ai-llm-vs.-human-expert-stylist" class="level1">
<h1><strong>The Fashion Face-Off: AI LLM vs.&nbsp;Human Expert Stylist</strong></h1>
</section>
<section id="zaria-dancer" class="level1">
<h1>Zaria Dancer</h1>
<hr>
<p>The deliverables for this project include two presentations on fashion styling, the content and analysis, and the AI choices regarding the presentation. The first presentation is created by yours truly, and the other generated by AI after the prior presentation.</p>
<p>Below, you’ll find the content from both. Can you spot the human touch and the sneaky signs of AI in these presentations?</p>
<p><em>Continue reading to find out!</em></p>
<hr>
</section>
<section id="presentation-1-content" class="level1">
<h1><strong>Presentation 1 Content</strong></h1>
<p>How To Style 101</p>
<p>SLIDE 1:</p>
<p>&nbsp;&nbsp;An outfit must be interesting through</p>
<p>● Color</p>
<p>● Shape</p>
<p>● Texture</p>
<p>Slide 2: &nbsp;&nbsp;Key Features for Success Find Your Personal Style &amp; Pick Colors that work best for you - (Consider Professional Color Wheel Readings &amp; Consultations)</p>
<p>Build a Foundation Wardrobe &amp; Buy Basics - jeans (Blue &amp; Black), white oxford button-down shirt, a black blazer, loafers, white &amp; black tees, and or a well-fitting/comfortable dress</p>
<p>&nbsp;&nbsp;&nbsp;Play with proportions &amp; Pick flattering shapes that work for your body - Tailor if Necessary</p>
<p>SLIDE 3:</p>
<p>&nbsp;&nbsp;&nbsp;Things to Consider Inspiration: Use Magazines and other forms of Media if necessary - Pinterest is a great option Colors: Neutrals are your friend - maybe even Bestfriend. When in doubt, stick to the Basics. Patterns: Start Simple: 1 Solid/1 Pattern or 2 Similar Patterns - Color Coordination is Key Here Occasion: Where Are You Going? Is it Upscale or Casual? Style: Classic or Trendy? Chic or Boho? Versatility is always possible with Cohesion Accessories: Elevate your Outfit with Jewelry, Scarves, Belts, Hats, and or Bags - Don’t Over Do It .</p>
<p>SLIDE 4:</p>
<p>Pairing large-scale patterns with a smaller one creates a more balanced look. If you’re uncomfortable, begin with 1-2 patterns. As you learn more about your style and coordination - continue to explore. Work with tones and colors that suit you and ensure a cohesive look.</p>
<p>When picking patterns, consider options in the same color palette or choose complementary colors.</p>
<p>Pick a focal point for your outfit &amp; build around it to highlight and complement it. Wear What Make You Look and Feel Good. Your Confidence, Comfort, and Happiness is most importance.</p>
<p>Wear the outfit, don’t let it wear you!</p>
</section>
<section id="presentation-2-content" class="level1">
<h1><strong>Presentation 2 Content</strong></h1>
<p>Introduction to Fashion Styling</p>
<p>Fashion Styling 101</p>
<p>Objective: Understanding the Basics</p>
<p>Key Points:</p>
<p>Fashion styling is the art of curating and coordinating clothing and accessories to create visually compelling looks. As a fashion stylist, your role is to understand trends, colors, textures, and body types to create harmonious outfits. Fashion styling is essential for editorial shoots, runway shows, personal styling, and commercial campaigns. Slide 2: Elements of Fashion Styling</p>
<p>Title: The Essentials</p>
<p>Key Elements:</p>
<p>Color Theory: Understanding how colors complement or contrast each other.</p>
<p>Silhouettes: Knowledge of different clothing shapes and their suitability for various body types.</p>
<p>Texture Play: Mixing fabrics like silk, denim, and knit to add depth and interest.</p>
<p>Accessories: Incorporating jewelry, bags, belts, and shoes to enhance outfits.</p>
<p>Trend Awareness: Staying updated with current fashion trends and interpreting them creatively.</p>
<p>Slide 3: Tips for Aspiring Fashion Stylists</p>
<p>Title: Pathway to Success</p>
<p>Guidance:</p>
<p>Build Your Portfolio: Curate a diverse portfolio showcasing your styling range.</p>
<p>Network: Connect with photographers, models, and designers to collaborate and gain experience.</p>
<p>Develop Personal Style: Cultivate a unique aesthetic that reflects your vision as a stylist.</p>
<p>Stay Educated: Continuously learn about fashion history, emerging designers, and industry developments.</p>
<p>Internships and Assistants: Consider internships or assisting established stylists to gain hands-on experience.</p>
<hr>
</section>
<section id="geminis-response" class="level1">
<h1>Gemini’s Response</h1>
<p>Based on the content and structure, <strong>Presentation 1: How To Style 101 is more likely generated by Artificial Intelligence (AI).</strong> Here’s why:</p>
<p>Focus on Basics and Rules: The presentation emphasizes building a foundation wardrobe with basic items and following core fashion rules (e.g., sticking to neutrals, color coordination). This aligns with how AIs are trained on vast amounts of data and might prioritize established principles. Listing and Bullet Points: The use of bullet points and clear lists for “Key Features for Success” and “Things to Consider” suggests a focus on presenting information in a structured and easily digestible way, a common approach in AI-generated content. Formal Tone: The overall tone is more formal and lacks personal anecdotes or insights that a human stylist might include. Presentation 2, on the other hand, shows signs of being crafted by a human expert:</p>
<p>Focus on Personal Style: The title “Empowering You to Express Your Unique Style” and the emphasis on personal expression indicate a human understanding of the subjective nature of fashion. Actionable Steps with Context: The presentation goes beyond basic principles and provides practical steps like “Audit Your Closet” and “Define Your Style,” suggesting a human stylist who can guide individuals based on their specific needs. Engaging Language: The use of phrases like “boost confidence” and “discover what resonates with you” suggests a human approach that aims to connect with the audience on a personal level. While it’s not always definitive, these are the clues that suggest Presentation 1 is more likely the AI-generated option.</p>
</section>
<section id="chatgpts-response" class="level1">
<h1>ChatGPT’s Response</h1>
<p>Based on the descriptions provided, <strong>the presentation that was likely generated by artificial intelligence (AI) is Presentation 2: How to Style 101</strong>.</p>
<p>Here’s why:</p>
<p>Objective: The stated objective of the presentation is to empower individuals to express their unique style, a goal that aligns with AI-generated content aimed at providing broad guidance and principles.</p>
<p>Key Points and Tips: The presentation emphasizes essential concepts for successful personal styling, such as understanding body shape, creating color stories, balancing outfits, and embracing versatility. These points cover foundational aspects of fashion styling that an AI model can systematically generate.</p>
<p>Practical Advice: The actionable advice provided in Slide 3, including auditing one’s closet, defining personal style, experimenting with new styles, seeking inspiration, and embracing confidence, reflects a structured approach to styling that AI-generated content often embodies.</p>
<p>Comprehensive Coverage: The presentation covers a range of topics essential to personal styling, from body shape awareness to outfit coordination and self-expression through fashion choices. This breadth of coverage and structured presentation format is characteristic of AI-generated content aimed at providing comprehensive guidance.</p>
<p>Therefore, based on the content structure and focus on principles and practical advice for personal styling, Presentation 2 is likely the one generated by artificial intelligence.</p>
</section>
<section id="llama-3s-response" class="level1">
<h1>LLama 3’s Response</h1>
<p><strong>Presentation 1: How To Style 101</strong> was likely generated by Artificial Intelligence.</p>
<p>Here’s why:</p>
<ol type="1">
<li><strong>Structured format</strong>: The presentation has a clear, structured format, with headings, bullet points, and short sentences, which is typical of AI-generated content.</li>
<li><strong>Simple, concise language</strong>: The language used is simple, concise, and easy to understand, which is characteristic of AI-generated content.</li>
<li><strong>Use of bullet points and headings</strong>: The presentation uses bullet points and headings to break up the content, making it easy to scan and understand, a common trait of AI-generated content.</li>
<li><strong>Lack of personal touch</strong>: The presentation lacks a personal touch, such as anecdotes, examples, or personal experiences, which is often present in human-generated content.</li>
<li><strong>Repetition of key points</strong>: The presentation repeats key points, such as “Wear What Make You Look and Feel Good” and “Your Confidence, Comfort, and Happiness is most importance,” which may indicate an AI-generated content trying to emphasize certain points.</li>
</ol>
<p>In contrast, <strong>Presentation 2: Introduction to Personal Styling</strong> seems more human-generated, with a more conversational tone, personal tips, and a more nuanced approach to styling.</p>
<p>Please note that this is not a definitive conclusion, and it’s possible that a human could have generated Presentation 1 using a structured format and simple language.</p>
</section>
<section id="claudes-response" class="level1">
<h1>Claude’s Response</h1>
<p>Based on the structure, content, and writing style, Presentation 1 appears to be the one generated by Artificial Intelligence. Several factors point to this conclusion: Lack of coherent structure: Presentation 1 lacks a clear, logical flow. The information is presented as a series of bullet points without a well-defined introduction, body, and conclusion. In contrast, Presentation 2 has a clear structure with an introduction, key concepts, and practical steps. Inconsistent formatting: The formatting in Presentation 1 is inconsistent. Some points are in sentence case, while others use title case. There are also inconsistencies in punctuation and spacing. Presentation 2 maintains consistent formatting throughout. Repetitive or generic advice: Some of the advice in Presentation 1 is repetitive or generic, such as “Wear What Make You Look and Feel Good” and “Wear the outfit, don’t let it wear you.” These phrases, while catchy, don’t provide substantial guidance. Presentation 2 offers more specific and actionable advice. Grammatical and stylistic issues: Presentation 1 contains some grammatical errors and awkward phrasing, such as “Neutrals are your friend - maybe even Bestfriend.” and “Your Confidence, Comfort, and Happiness is most importance.” These types of errors are more likely to occur in AI-generated content. Presentation 2 demonstrates better grammar and style. Lack of in-depth explanations: Presentation 1 mentions concepts like color coordination and balancing patterns but doesn’t provide detailed explanations. Presentation 2 goes into more depth, explaining why each concept is important and how to apply it. While AI can generate helpful content, it sometimes struggles with maintaining a coherent structure, consistent formatting, and providing in-depth, contextually relevant explanations. Based on these factors, <strong>Presentation 1 is more likely to be the AI-generated content</strong>, while Presentation 2 appears to be created by a human expert.</p>
<hr>
<hr>
</section>
<section id="were-you-able-to-tell-the-difference-between-human-and-ai" class="level1">
<h1><strong>Were you able to tell the difference between Human and AI?</strong></h1>
<p>Presentation #2 was generated by an LLM, being ChatGPT. The prompt was, “Please give me a 3-slide presentation to use as though I am an expert at fashion styling (”How to Style 101”) for individuals who want to learn how to style themselves”</p>
<p>The only LLM that was correct is ChatGPT</p>
<p><strong>Presentation 1</strong>: My Work</p>
<p><strong>Presenation 2</strong>: AI Generated</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dancerz\.github\.io\/comm4190_S24_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>